<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="https://static.timerx.top/timerx/assets/img/favicon.ico">
    <link rel="icon" type="image/png" href="https://static.timerx.top/timerx/assets/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>用户管理</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
        name='viewport' />

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:300,300i,400,600,800" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
        integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!-- Main CSS -->
    <link href="https://static.timerx.top/timerx/assets/css/main.css" rel="stylesheet" />

    <!-- Animation CSS -->
    <link href="https://static.timerx.top/timerx/assets/css/vendor/aos.css" rel="stylesheet" />

</head>

<body>

    <!----------------------------------------------------------------------
    NAVBAR (remove topnav if you don't want changed nav background on scroll)
    --------------------------------------------------------------------- -->
    <nav class="topnav navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="/index/"><strong>TimerX</strong></a>
            <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02"
                aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse" id="navbarColor02">
                <ul class="navbar-nav mr-auto d-flex align-items-center">

                    <li class="nav-item">
                        <a class="nav-link" href="/manage-user/">用户管理</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/manage-operation/">操作记录</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/manage-update/">更新记录</a>
                    </li>

                </ul>
                <ul class="navbar-nav ml-auto d-flex align-items-center">
                    <li class="nav-item m-2">
                        <a class="btn btn-info btn-round shadow-sm" href="/adduser/">添加用户</a>
                    </li>
                    <li id="user" class="nav-item dropdown">
                        <a class="btn btn-info btn-round shadow-sm nav-link dropdown-toggle text-dark pl-3 pr-3"
                            href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <i class="fas fa-user"></i>
                            {{userSession.username}}</a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="/logout/">登出</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- End Navbar -->

    <!-------------------------------------
    HEADER
    ------------------------------------ -->
    <div class="jumbotron jumbotron-fluid mb-3 bg-primary position-relative">
        <div class="container text-white h-100 tofront">
            <div class="row align-items-center justify-content-center text-center">
                <div class="col-md-10">
                    <h1 class="display-3"><b>用户管理</b></h1>
                    <!-- <h3 class="font-weight-light mb-4">
                        简单便捷，高性价比，为您提供轻量级网站解决方案。
                    </h3> -->
                </div>
            </div>
        </div>
    </div>
    <!--- END HEADER -->

    <!-------------------------------------
    MAIN
    ------------------------------------ -->
    <main class="container-fluid">
        <section class="pt-3 pb-3">
            <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
                <div class="container">
                    <span class="navbar-brand" href="#"><strong>{{filterName}}</strong></span>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarNavDropdown-1" aria-controls="navbarNavDropdown-1" aria-expanded="false"
                        aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarNavDropdown-1">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item"><a class="nav-link" href="/manage-user/?filter=all&name=全部用户">全部用户</a>
                            </li>
                            <li class="nav-item"><a class="nav-link"
                                    href="/manage-user/?filter=state&value=运行中&name=运行中">运行中</a>
                            </li>
                            <li class="nav-item"><a class="nav-link"
                                    href="/manage-user/?filter=state&value=已欠费&name=已欠费">已欠费</a>
                            </li>
                            <li class="nav-item"><a class="nav-link"
                                    href="/manage-user/?filter=state&value=停止运行&name=停止运行">停止运行</a></li>
                            <li class="nav-item"><a class="nav-link"
                                    href="/manage-user/?filter=domain_name_expiration_date&value=30&name=域名将到期">域名将到期</a>
                            </li>
                        </ul>
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <button class="btn btn-info btn-round shadow-sm m-2" id="showViewSetting">显示设置</button>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <header id="viewSetting" style="display: none;">
                <div class="jumbotron-fluid mb-0 bg-primary position-relative pt-3 pb-3">
                    <div class="container text-white h-100">
                        <div class="align-items-center justify-content-between text-center">
                            <div class="col lg-mr-5 lg-ml-5 lg-pr-5 lg-pl-5">
                                <p>
                                    全部表项：<br>
                                    用户id 用户名 密码 电话号码 用户级别 域名 会员积分
                                    账户余额 建站日期 上次月付日期 下次月付日期 月付金额
                                    域名到期日期 域名续费金额 备注 状态 欠费日期 欠费天数
                                </p>
                                <p>
                                    电脑合适表项：<br>
                                    用户id 用户名 电话号码 域名 账户余额 状态
                                </p>
                                <p>
                                    手机合适表项：<br>
                                    用户名 电话号码
                                </p>
                                <form action="/manage-view/" method="post">
                                    {% csrf_token %}
                                    <input class="d-none" type="text" name="viewType" value="user">
                                    <div class="form-group">
                                        <textarea class="form-control" rows="2"
                                            name='viewStr'>{{userViewInfo}}</textarea>
                                    </div>
                                    <button type="submit" class="btn btn-lg btn-outline-white btn-round">保存</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <svg style="-webkit-transform:rotate(-180deg); -moz-transform:rotate(-180deg); -o-transform:rotate(-180deg); transform:rotate(-180deg); margin-top: -1px;"
                    version="1.1" id="Layer_1" xmlns=""
                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 1440 126"
                    style="enable-background:new 0 0 1440 126;" xml:space="preserve">
                    <path class="bg-primary"
                        d="M685.6,38.8C418.7-11.1,170.2,9.9,0,30v96h1440V30C1252.7,52.2,1010,99.4,685.6,38.8z" />
                </svg>
            </header>
        </section>
        <!-- 用户表 -->
        <section class="pt-4 pb-5">
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">
                            #
                        </th>
                        {% if '用户id' in userViewInfo %}
                        <th scope="col">
                            用户id
                        </th>
                        {% endif %}
                        {% if '用户名' in userViewInfo %}
                        <th scope="col">
                            用户名
                        </th>
                        {% endif %}
                        {% if '密码' in userViewInfo %}
                        <th scope="col">
                            密码
                        </th>
                        {% endif %}
                        {% if '电话号码' in userViewInfo %}
                        <th scope="col">
                            电话号码
                        </th>
                        {% endif %}
                        {% if '用户级别' in userViewInfo %}
                        <th scope="col">
                            用户级别
                        </th>
                        {% endif %}
                        {% if '域名' in userViewInfo %}
                        <th scope="col">
                            域名
                        </th>
                        {% endif %}
                        {% if '会员积分' in userViewInfo %}
                        <th scope="col">
                            会员积分
                        </th>
                        {% endif %}
                        {% if '账户余额' in userViewInfo %}
                        <th scope="col">
                            账户余额
                        </th>
                        {% endif %}
                        {% if '建站日期' in userViewInfo %}
                        <th scope="col">
                            建站日期
                        </th>
                        {% endif %}
                        {% if '上次月付日期' in userViewInfo %}
                        <th scope="col">
                            上次月付日期
                        </th>
                        {% endif %}
                        {% if '下次月付日期' in userViewInfo %}
                        <th scope="col">
                            下次月付日期
                        </th>
                        {% endif %}
                        {% if '月付金额' in userViewInfo %}
                        <th scope="col">
                            月付金额
                        </th>
                        {% endif %}
                        {% if '域名到期日期' in userViewInfo %}
                        <th scope="col">
                            域名到期日期
                        </th>
                        {% endif %}
                        {% if '域名续费金额' in userViewInfo %}
                        <th scope="col">
                            域名续费金额
                        </th>
                        {% endif %}
                        {% if '备注' in userViewInfo %}
                        <th scope="col">
                            备注
                        </th>
                        {% endif %}
                        {% if '状态' in userViewInfo %}
                        <th scope="col">
                            状态
                        </th>
                        {% endif %}
                        <!-- 不用修改次数，暂时通过备注来标记 -->
                        <!-- 
                        {% if '剩余修改次数' in userViewInfo %}
                        <th scope="col">
                            剩余修改次数
                        </th>
                        {% endif %}
                        {% if '每月修改次数' in userViewInfo %}
                        <th scope="col">
                            每月修改次数
                        </th> 
                        {% endif %}
                        -->
                        {% if '欠费日期' in userViewInfo %}
                        <th scope="col">
                            欠费日期
                        </th>
                        {% endif %}
                        {% if '欠费天数' in userViewInfo %}
                        <th scope="col">
                            欠费天数
                        </th>
                        {% endif %}
                        <th scope="col">
                            <!-- 操作按钮 -->
                        </th>
                    </tr>
                </thead>
                <tbody>
                    {% for userInfo in userList %}
                    <tr>
                        <th scope="row">
                            {{forloop.counter}}
                        </th>

                        {% if '用户id' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.id}}
                        </td>
                        {% endif %}
                        {% if '用户名' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.username}}
                        </td>
                        {% endif %}
                        {% if '密码' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.password}}
                        </td>
                        {% endif %}
                        {% if '电话号码' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.phonenum}}
                        </td>
                        {% endif %}
                        {% if '用户级别' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.level}}
                        </td>
                        {% endif %}
                        {% if '域名' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.domain_name}}
                        </td>
                        {% endif %}
                        {% if '会员积分' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.member_points}}
                        </td>
                        {% endif %}
                        {% if '账户余额' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.account}}
                        </td>
                        {% endif %}
                        {% if '建站日期' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.create_time|date:"Y-m-d"}}
                        </td>
                        {% endif %}
                        {% if '上次月付日期' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.last_monthly_payment_date|date:"m-d"}}
                        </td>
                        {% endif %}
                        {% if '下次月付日期' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.next_monthly_payment_date|date:"m-d"}}
                        </td>
                        {% endif %}
                        {% if '月付金额' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.monthly_payment_amount}}
                        </td>
                        {% endif %}
                        {% if '域名到期日期' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.domain_name_expiration_date|date:"Y-m-d"}}
                        </td>
                        {% endif %}
                        {% if '域名续费金额' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.domain_name_renewal_amount}}
                        </td>
                        {% endif %}
                        {% if '备注' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.notes}}
                        </td>
                        {% endif %}
                        {% if '状态' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.state}}
                        </td>
                        {% endif %}
                        <!-- 不用修改次数，暂时通过备注来标记 -->
                        <!-- 
                        {% if '剩余修改次数' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.remaining_modifications}}
                        </td>
                        {% endif %}
                        {% if '每月修改次数' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.monthly_modifications}}
                        </td>
                        {% endif %}
                         -->
                        {% if '欠费日期' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.due_date}}
                        </td>
                        {% endif %}
                        {% if '欠费天数' in userViewInfo %}
                        <td scope="col">
                            {{userInfo.due_days}}
                        </td>
                        {% endif %}
                        <td style="text-align: center;">
                            <!-- <a href="/user/?id={{userInfo.id}}" type="button" class="btn btn-sm btn-dark btn-round">
                                操作
                            </a> -->
                            <a href="/user/?id={{userInfo.id}}" class="badge badge-pill badge-dark pt-1">操作</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>、
        </section>
    </main>
    <!--- END MAIN -->


    <!--------------------------------------
    FOOTER
    ------------------------------------ -->
    <footer class="bg-light pb-5 pt-4">
        <div class="container">
            <div class="row justify-content-center text-center">
                <div class="col-md-12">
                    <span class="d-block mt-3 text-muted">© 2023 TimerX
                </div>
            </div>
        </div>
    </footer>



    <!--------------------------------------
    JAVASCRIPTS
    ------------------------------------ -->
    <script src="https://static.timerx.top/timerx/assets/js/vendor/jquery.min.js" type="text/javascript"></script>
    <script src="https://static.timerx.top/timerx/assets/js/vendor/popper.min.js" type="text/javascript"></script>
    <script src="https://static.timerx.top/timerx/assets/js/vendor/bootstrap.min.js" type="text/javascript"></script>
    <script src="https://static.timerx.top/timerx/assets/js/vendor/share.js" type="text/javascript"></script>
    <script src="https://static.timerx.top/timerx/assets/js/functions.js" type="text/javascript"></script>

    <!-- Animation -->
    <script src="https://static.timerx.top/timerx/assets/js/vendor/aos.js" type="text/javascript"></script>
    <noscript>
        <style>
            *[data-aos] {
                display: block !important;
                opacity: 1 !important;
                visibility: visible !important;
            }
        </style>
    </noscript>
    <script>
        AOS.init({
            duration: 700
        });
    </script>

    <!-- Disable animation on less than 0px, change value if you like -->
    <script>
        AOS.init({
            disable: function () {
                var maxWidth = 0;
                return window.innerWidth < maxWidth;
            }
        });
    </script>

    <!-- Carousel Height Smooth -->
    <script>
        $('.carousel').on('slide.bs.carousel', function (event) {
            var height = $(event.relatedTarget).height();
            var $innerCarousel = $(event.target).find('.carousel-inner');
            $innerCarousel.animate({
                height: height
            });
        });
    </script>

    <!-- Popovers -->
    <script>
        $(function () {
            $('[data-toggle="popover"]').popover()
        })
        $('.popover-dismiss').popover({
            trigger: 'focus'
        })
    </script>

    <!-- Tooltips -->
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>

    <!-- 显示设置的显示与隐藏 -->
    <script>
        $("#showViewSetting").click(function () {
            $("#viewSetting").toggle();
        });
    </script>

</body>

</html>